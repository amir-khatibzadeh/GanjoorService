@model GanjooRazor.Pages._QuotedPoemPartialModel
@using DNTPersianUtils.Core
@{
    Layout = null;
}

<div class="@Model.BlockClass">
    @if(Model.GanjoorQuotedPoemViewModel.ClaimedByBothPoets)
    {
        <div class="ribbon">منتسب به هر دو سخنور</div>
    }
    
    @if (Model.GanjoorQuotedPoemViewModel.IsPriorToRelated)
    {
        <div class="poet-pic-wrap">
            <img src="@(GanjooRazor.APIRoot.InternetUrl + Model.PoetImageUrl)" alt="@Model.PoetNickName">
        </div>
        <div class="simitext">
            <p>
                <a href="#bn@(Model.GanjoorQuotedPoemViewModel.CoupletIndex + 1)">
                    <strong>
                        همین شعر » بیت @((Model.GanjoorQuotedPoemViewModel.CoupletIndex + 1).ToPersianNumbers())
                    </strong>
                </a>
            </p>
            <p>

                @if (Model.GanjoorQuotedPoemViewModel.CoupletVerse1ShouldBeEmphasized)
                {
                    <strong>@Model.GanjoorQuotedPoemViewModel.CoupletVerse1</strong>

                }
                else
                {
                    @Model.GanjoorQuotedPoemViewModel.CoupletVerse1
                }
            </p>
            <p>
                @if (Model.GanjoorQuotedPoemViewModel.CoupletVerse2ShouldBeEmphasized)
                {
                    <strong>@Model.GanjoorQuotedPoemViewModel.CoupletVerse2</strong>

                }
                else
                {
                    @Model.GanjoorQuotedPoemViewModel.CoupletVerse2
                }
            </p>

        </div>

        <div class="poet-pic-wrap">
            @if(string.IsNullOrEmpty(Model.GanjoorQuotedPoemViewModel.CachedRelatedPoemPoetImage))
            {
                <img src="/image/unknown.gif" alt="@Model.GanjoorQuotedPoemViewModel.CachedRelatedPoemPoetName" />
            }
            else
            {
                <a href="@Html.Raw(Model.GanjoorQuotedPoemViewModel.CachedRelatedPoemFullUrl)"><img src="@(GanjooRazor.APIRoot.InternetUrl +  Model.GanjoorQuotedPoemViewModel.CachedRelatedPoemPoetImage)" alt="@Model.GanjoorQuotedPoemViewModel.CachedRelatedPoemPoetName"></a>
            }
            
        </div>
        <div class="inlinesimi-poem-title">
            @if (string.IsNullOrEmpty(Model.GanjoorQuotedPoemViewModel.CachedRelatedPoemFullUrl))
            {
                <strong>
                    @Model.GanjoorQuotedPoemViewModel.CachedRelatedPoemFullTitle
                </strong>
            }
            else if (Model.GanjoorQuotedPoemViewModel.RelatedCoupletIndex != null)
            {
                <a href="@Html.Raw(Model.GanjoorQuotedPoemViewModel.CachedRelatedPoemFullUrl)#bn@(Model.GanjoorQuotedPoemViewModel.RelatedCoupletIndex + 1)">
                    @(Model.GanjoorQuotedPoemViewModel.CachedRelatedPoemFullTitle + " » بیت " + ((Model.GanjoorQuotedPoemViewModel.RelatedCoupletIndex + 1).ToPersianNumbers()))
                </a>
            }
            else
            {
                <a href="@Html.Raw(Model.GanjoorQuotedPoemViewModel.CachedRelatedPoemFullUrl)">
                    @Model.GanjoorQuotedPoemViewModel.CachedRelatedPoemFullTitle
                </a>
            }

        </div>
        <div class="simitext">
            <p>

                @if (Model.GanjoorQuotedPoemViewModel.RelatedCoupletVerse1ShouldBeEmphasized)
                {
                    <strong>@Model.GanjoorQuotedPoemViewModel.RelatedCoupletVerse1</strong>
                }
                else
                {
                    @Model.GanjoorQuotedPoemViewModel.RelatedCoupletVerse1
                }
            </p>
            <p>
                @if (Model.GanjoorQuotedPoemViewModel.RelatedCoupletVerse2ShouldBeEmphasized)
                {
                    <strong>@Model.GanjoorQuotedPoemViewModel.RelatedCoupletVerse2</strong>
                }
                else
                {
                    @Model.GanjoorQuotedPoemViewModel.RelatedCoupletVerse2
                }
            </p>
        </div>
    }
    else
    {
        <div class="poet-pic-wrap">
            @if (string.IsNullOrEmpty(Model.GanjoorQuotedPoemViewModel.CachedRelatedPoemPoetImage))
            {
                <img src="/image/unknown.gif" alt="@Model.GanjoorQuotedPoemViewModel.CachedRelatedPoemPoetName" />
            }
            else
            {
                <a href="@Html.Raw(Model.GanjoorQuotedPoemViewModel.CachedRelatedPoemFullUrl)"><img src="@(GanjooRazor.APIRoot.InternetUrl +  Model.GanjoorQuotedPoemViewModel.CachedRelatedPoemPoetImage)" alt="@Model.GanjoorQuotedPoemViewModel.CachedRelatedPoemPoetName"></a>
            }
        </div>
        <div class="inlinesimi-poem-title">
            @if (string.IsNullOrEmpty(Model.GanjoorQuotedPoemViewModel.CachedRelatedPoemFullUrl))
            {
                <strong>
                    @Model.GanjoorQuotedPoemViewModel.CachedRelatedPoemFullTitle
                </strong>
            }
            else if (Model.GanjoorQuotedPoemViewModel.RelatedCoupletIndex != null)
            {
                <a href="@Html.Raw(Model.GanjoorQuotedPoemViewModel.CachedRelatedPoemFullUrl)#bn@(Model.GanjoorQuotedPoemViewModel.RelatedCoupletIndex + 1)">
                    @(Model.GanjoorQuotedPoemViewModel.CachedRelatedPoemFullTitle + " » بیت " + ((Model.GanjoorQuotedPoemViewModel.RelatedCoupletIndex + 1).ToPersianNumbers()))
                </a>
            }
            else
            {
                <a href="@Html.Raw(Model.GanjoorQuotedPoemViewModel.CachedRelatedPoemFullUrl)">
                    @Model.GanjoorQuotedPoemViewModel.CachedRelatedPoemFullTitle
                </a>
            }

        </div>
        <div class="simitext">
            <p>

                @if (Model.GanjoorQuotedPoemViewModel.RelatedCoupletVerse1ShouldBeEmphasized)
                {
                    <strong>@Model.GanjoorQuotedPoemViewModel.RelatedCoupletVerse1</strong>
                }
                else
                {
                    @Model.GanjoorQuotedPoemViewModel.RelatedCoupletVerse1
                }
            </p>
            <p>
                @if (Model.GanjoorQuotedPoemViewModel.RelatedCoupletVerse2ShouldBeEmphasized)
                {
                    <strong>@Model.GanjoorQuotedPoemViewModel.RelatedCoupletVerse2</strong>
                }
                else
                {
                    @Model.GanjoorQuotedPoemViewModel.RelatedCoupletVerse2
                }
            </p>
        </div>

        <div class="poet-pic-wrap">
            <img src="@(GanjooRazor.APIRoot.InternetUrl + Model.PoetImageUrl)" alt="@Model.PoetNickName">
        </div>
        <div class="simitext">
            <p>
                <a href="#bn@(Model.GanjoorQuotedPoemViewModel.CoupletIndex + 1)">
                    <strong>
                        همین شعر » بیت @((Model.GanjoorQuotedPoemViewModel.CoupletIndex + 1).ToPersianNumbers())
                    </strong>
                </a>
            </p>
            <p>

                @if (Model.GanjoorQuotedPoemViewModel.CoupletVerse1ShouldBeEmphasized)
                {
                    <strong>@Model.GanjoorQuotedPoemViewModel.CoupletVerse1</strong>

                }
                else
                {
                    @Model.GanjoorQuotedPoemViewModel.CoupletVerse1
                }
            </p>
            <p>
                @if (Model.GanjoorQuotedPoemViewModel.CoupletVerse2ShouldBeEmphasized)
                {
                    <strong>@Model.GanjoorQuotedPoemViewModel.CoupletVerse2</strong>

                }
                else
                {
                    @Model.GanjoorQuotedPoemViewModel.CoupletVerse2
                }
            </p>

        </div>


    }

    @if (Model.GanjoorQuotedPoemViewModel.ChosenForMainList && Model.GanjoorQuotedPoemViewModel.SamePoemsQuotedCount > 1)
    {
        <a role="button" class="pagebutton" id="@($"load-more-quoted-button-{Model.GanjoorQuotedPoemViewModel.Id}")" onclick="loadMoreQuotedForRelatedPoem('@Model.GanjoorQuotedPoemViewModel.Id', @Model.GanjoorQuotedPoemViewModel.PoemId, @Model.GanjoorQuotedPoemViewModel.RelatedPoemId, '@Model.PoetImageUrl', '@Model.PoetNickName', @Model.CanEdit.ToString().ToLower())">مشاهدهٔ @((Model.GanjoorQuotedPoemViewModel.SamePoemsQuotedCount - 1).ToPersianNumbers()) نقل قول دیگر در همین شعر<i class="notranslate info-buttons autorenew"></i></a>
    }

    @if (Model.GanjoorQuotedPoemViewModel.ClaimedByBothPoets)
    {
        <div class="century-alt">
            <a href="/faq?id=7">چطور یک شعر می‌تواند به چند شاعر منتسب باشد؟</a>
        </div>
    }
    

    @if(!string.IsNullOrEmpty(Model.GanjoorQuotedPoemViewModel.Note))
    {
        <div class="notice">
            @Html.Raw(Model.GanjoorQuotedPoemViewModel.Note)
        </div>
    }



    @if (Model.CanEdit)
    {
        <a href="/Admin/EditQuoted/?p=@Model.GanjoorQuotedPoemViewModel.PoemId&id=@Model.GanjoorQuotedPoemViewModel.Id" class="pagebutton comments-link">ویرایش</a>
    }

</div>

@if (Model.GanjoorQuotedPoemViewModel.ChosenForMainList && Model.GanjoorQuotedPoemViewModel.SamePoemsQuotedCount > 1)
{
    <div id=@($"more-quoted-placeholder-{Model.GanjoorQuotedPoemViewModel.Id}")></div>
}


